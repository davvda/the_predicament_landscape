<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Predicament Landscape</title>
    <style>
        * { box-sizing: border-box; }
        
        body {
            margin: 0;
            padding: 0;
            font-family: Garamond, Baskerville, 'Baskerville Old Face', 'Hoefler Text', 'Times New Roman', serif;
            font-size: 20px;
            background-color: #FFFFEA;
        }
        
        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background-color: #FFFFEA;
            border-bottom: 2px solid #353535;
            display: flex;
            align-items: center;
            gap: 2%;
            padding: 0 2%;
            z-index: 100;
        }
        
        nav a {
            color: black;
            text-decoration: underline;
            text-decoration-color: rgb(255, 172, 47);
        }
        
        .container {
            display: flex;
            margin-top: 60px;
            height: calc(100vh - 60px);
        }
        
        .sidebar {
            width: 25%;
            overflow-y: auto;
            padding: 1em;
            border-right: 2px solid #353535;
        }
        
        .sidebar ol {
            padding-left: 3em;
            padding-right: 1em;
        }
        
        .sidebar::-webkit-scrollbar { display: none; }
        .sidebar { scrollbar-width: none; -ms-overflow-style: none; }
        
        main {
            width: 50%;
            overflow-y: auto;
            padding: 2em;
            border-right: 2px solid #353535;
        }
        
        main::-webkit-scrollbar { display: none; }
        main { scrollbar-width: none; -ms-overflow-style: none; }
        
        .sidebar-right {
            width: 25%;
            overflow-y: auto;
            padding: 1em;
        }
        
        .sidebar-right ol {
            padding-left: 3em;
            padding-right: 1em;
        }
        
        .sidebar-right::-webkit-scrollbar { display: none; }
        .sidebar-right { scrollbar-width: none; -ms-overflow-style: none; }
        
        h3 { text-align: center; }
        
        a {
            color: black;
            text-decoration: underline;
            text-decoration-color: rgb(255, 172, 47);
        }
        
        a:hover {
            background-image: url("data:image/svg+xml;charset=utf8,%3Csvg id='squiggle-link' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 4'%3E%3Cstyle type='text/css'%3E.squiggle{animation:shift .3s linear infinite;}@keyframes shift {from {transform:translateX(0);}to {transform:translateX(-20px);}}%3C/style%3E%3Cpath fill='none' stroke='rgb(255, 172, 47)' stroke-width='2' class='squiggle' d='M0,3.5 c 5,0,5,-3,10,-3 s 5,3,10,3 c 5,0,5,-3,10,-3 s 5,3,10,3'/%3E%3C/svg%3E");
            background-position: 0 100%;
            background-size: auto 2px;
            background-repeat: repeat-x;
            text-decoration: none;
        }
        
        a:visited { color: grey; }
        
        p, ul, ol {
            text-align: justify;
            line-height: 1.5em;
        }
        
        blockquote {
            margin: 10px 0 10px 50px;
            padding-left: 15px;
            width: 80%;
            border-left: 3px solid rgb(255, 172, 47);
        }
        
        cite {
            padding-left: 15px;
            color: #717171;
        }
        
        @media(max-width: 1000px) {
            .sidebar, .sidebar-right { display: none; }
            main { width: 100%; border-right: none; }
        }
    </style>
</head>
<body>
    <nav>
        <a href="#index">Home</a>
        <a href="#updates">Updates</a>
        <a href="#about">About</a>
        <a href="http://www.punk.ist/">punk.ist</a>
        <a href="https://ko-fi.com/punkistpoet">Donate</a>
    </nav>
    
    <div class="container">
        <aside class="sidebar">
            <h3>The Predicaments <img src="img/predicament_icon.png" alt="" style="height:2.43em; transform:rotate(90deg); vertical-align:middle;"></h3>
            <ol id="predicaments-list"></ol>
        </aside>
        
        <main id="content">
            <p>Loading...</p>
        </main>
        
        <aside class="sidebar-right">
            <h3><img src="img/overlay_icon.png" alt="" style="height:1.8em; vertical-align:middle;"> Overlay</h3>
            <ol id="overlay-list"></ol>
        </aside>
    </div>

    <script>
        // Load sidebar lists
        fetch('predicaments-list.html')
            .then(r => r.text())
            .then(html => {
                document.getElementById('predicaments-list').innerHTML = html;
                // Update links to use hash navigation
                document.querySelectorAll('#predicaments-list a').forEach(link => {
                    const href = link.getAttribute('href');
                    if (href && !href.startsWith('http')) {
                        link.setAttribute('href', '#' + href.replace('.html', ''));
                    }
                });
            });

        fetch('overlay-list.html')
            .then(r => r.text())
            .then(html => {
                document.getElementById('overlay-list').innerHTML = html;
                // Update links to use hash navigation
                document.querySelectorAll('#overlay-list a').forEach(link => {
                    const href = link.getAttribute('href');
                    if (href && !href.startsWith('http')) {
                        link.setAttribute('href', '#' + href.replace('.html', ''));
                    }
                });
            });

        // Router: Load content based on URL hash
        function loadContent(page) {
            const contentDiv = document.getElementById('content');
            
            // Default to index if no page specified
            if (!page || page === '') {
                page = 'index';
            }
            
            // Update document title
            document.title = page.charAt(0).toUpperCase() + page.slice(1) + ' - The Predicament Landscape';
            
            // Load content from content folder
            fetch(`content/${page}.html`)
                .then(response => {
                    if (!response.ok) throw new Error('Page not found');
                    return response.text();
                })
                .then(html => {
                    contentDiv.innerHTML = html;
                    
                    // Update all internal links in content to use hash navigation
                    contentDiv.querySelectorAll('a').forEach(link => {
                        const href = link.getAttribute('href');
                        if (href && href.endsWith('.html') && !href.startsWith('http')) {
                            link.setAttribute('href', '#' + href.replace('.html', ''));
                            link.addEventListener('click', (e) => {
                                e.preventDefault();
                                window.location.hash = href.replace('.html', '');
                            });
                        }
                    });
                    
                    // Scroll to top
                    contentDiv.scrollTop = 0;
                })
                .catch(err => {
                    contentDiv.innerHTML = '<h2>Page Not Found</h2><p>The requested page could not be loaded.</p>';
                });
        }

        // Handle hash changes (navigation)
        window.addEventListener('hashchange', () => {
            const page = window.location.hash.slice(1); // Remove the #
            loadContent(page);
        });

        // Load initial content
        const initialPage = window.location.hash.slice(1) || 'index';
        loadContent(initialPage);
    </script>
</body>
</html>
